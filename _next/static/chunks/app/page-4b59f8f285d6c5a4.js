(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2558:(e,t,l)=>{"use strict";l.d(t,{Toaster:()=>g});var a=l(5155),r=l(7481),s=l(2115),o=l(6621),d=l(2085),n=l(5318),i=l(9434);let c=o.Kq,m=s.forwardRef((e,t)=>{let{className:l,...r}=e;return(0,a.jsx)(o.LM,{ref:t,className:(0,i.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",l),...r})});m.displayName=o.LM.displayName;let x=(0,d.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),u=s.forwardRef((e,t)=>{let{className:l,variant:r,...s}=e;return(0,a.jsx)(o.bL,{ref:t,className:(0,i.cn)(x({variant:r}),l),...s})});u.displayName=o.bL.displayName,s.forwardRef((e,t)=>{let{className:l,...r}=e;return(0,a.jsx)(o.rc,{ref:t,className:(0,i.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",l),...r})}).displayName=o.rc.displayName;let p=s.forwardRef((e,t)=>{let{className:l,...r}=e;return(0,a.jsx)(o.bm,{ref:t,className:(0,i.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",l),"toast-close":"",...r,children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})});p.displayName=o.bm.displayName;let h=s.forwardRef((e,t)=>{let{className:l,...r}=e;return(0,a.jsx)(o.hE,{ref:t,className:(0,i.cn)("text-sm font-semibold",l),...r})});h.displayName=o.hE.displayName;let f=s.forwardRef((e,t)=>{let{className:l,...r}=e;return(0,a.jsx)(o.VY,{ref:t,className:(0,i.cn)("text-sm opacity-90",l),...r})});function g(){let{toasts:e}=(0,r.dj)();return(0,a.jsxs)(c,{children:[e.map(function(e){let{id:t,title:l,description:r,action:s,...o}=e;return(0,a.jsxs)(u,{...o,children:[(0,a.jsxs)("div",{className:"grid gap-1",children:[l&&(0,a.jsx)(h,{children:l}),r&&(0,a.jsx)(f,{children:r})]}),s,(0,a.jsx)(p,{})]},t)}),(0,a.jsx)(m,{})]})}f.displayName=o.VY.displayName},4443:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>$});var a=l(5155),r=l(2115),s=l(6766),o=l(6695),d=l(5863),n=l(9434);let i=r.forwardRef((e,t)=>{let{className:l,value:r,...s}=e;return(0,a.jsx)(d.bL,{ref:t,className:(0,n.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",l),...s,children:(0,a.jsx)(d.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});i.displayName=d.bL.displayName;let c=e=>{let{hero:t,onEditHeroBadges:l}=e,r=t.xpNeededForNextLevel>0?t.xpTowardsNextLevel/t.xpNeededForNextLevel*100:0,d="Level ".concat(t.level);return(0,a.jsx)(o.Zp,{className:(0,n.cn)("bg-card text-card-foreground shadow-md rounded-lg overflow-hidden transition-all duration-200 ease-in-out cursor-pointer","hover:shadow-2xl hover:scale-[1.02] hover:bg-card/80","ring-1 ring-transparent hover:ring-primary hover:ring-2 flex flex-col"),"data-testid":"hero-card-".concat(t.id),onClick:()=>l(t),children:(0,a.jsxs)(o.Wu,{className:"p-4 flex flex-col items-center text-center space-y-3 flex-grow",children:[(0,a.jsx)("div",{className:"w-full max-w-[90%] aspect-square relative",children:(0,a.jsx)(s.default,{src:t.portraitUrl,alt:"".concat(t.name," Portrait"),fill:!0,sizes:"(max-width: 640px) 45vw, (max-width: 768px) 30vw, (max-width: 1024px) 22vw, (max-width: 1280px) 18vw, 150px",className:"rounded-lg border-2 border-primary/80 shadow-md object-cover","data-ai-hint":"hero portrait"})}),(0,a.jsxs)("div",{className:"w-full space-y-1",children:[(0,a.jsx)("h3",{className:"text-xl font-bold truncate",children:t.name}),(0,a.jsx)("p",{className:"text-sm text-accent font-semibold uppercase tracking-wider",children:d})]}),(0,a.jsxs)("div",{className:"w-full max-w-[90%] mt-auto pt-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center text-xs mb-1",children:[(0,a.jsxs)("span",{className:"text-muted-foreground",children:[t.xpTowardsNextLevel.toLocaleString(),"/",t.xpNeededForNextLevel.toLocaleString()," XP"]}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:[r.toFixed(1),"%"]})]}),(0,a.jsx)(i,{value:r,className:"h-2.5 bg-primary/30 [&>div]:bg-primary"})]})]})})};var m=l(2523),x=l(5057);let u=e=>{let{challenge:t,heroId:l,onLevelChange:s}=e,d=t.icon,[n,i]=(0,r.useState)(String(t.level));(0,r.useEffect)(()=>{i(String(t.level))},[t.level]);let c=()=>{let e=parseInt(n,10);(isNaN(e)||e<1)&&(e=1),e!==t.level&&s(l,t.id,e),i(String(e))};return(0,a.jsxs)(o.Zp,{className:"bg-card text-card-foreground shadow-md rounded-lg overflow-hidden flex flex-col h-full",children:[(0,a.jsx)(o.aR,{className:"p-3 pb-2",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[d?(0,a.jsx)(d,{className:"h-7 w-7 text-primary flex-shrink-0",strokeWidth:1.5}):(0,a.jsx)("div",{className:"h-7 w-7 bg-muted rounded flex items-center justify-center text-muted-foreground text-xs",children:"?"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold uppercase tracking-wider truncate",title:t.title,children:t.title}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["XP/Lvl: ",t.xpPerLevel.toLocaleString()]})]})]})}),(0,a.jsx)(o.Wu,{className:"p-3 pt-1 flex-grow flex flex-col justify-end",children:(0,a.jsxs)("div",{className:"mt-1",children:[(0,a.jsx)(x.J,{htmlFor:"".concat(l,"-").concat(t.id,"-level"),className:"text-xs text-muted-foreground mb-1 block",children:"Badge Level (Min 1)"}),(0,a.jsx)(m.p,{id:"".concat(l,"-").concat(t.id,"-level"),type:"number",value:n,onChange:e=>{i(e.target.value)},onBlur:()=>{c()},onKeyPress:e=>{"Enter"===e.key&&(c(),e.target.blur())},min:"1",className:"h-9 text-sm bg-input w-full",placeholder:"1"})]})})]})};var p=l(5452),h=l(2085),f=l(5318);let g=p.bL;p.l9,p.bm;let v=p.ZL,b=r.forwardRef((e,t)=>{let{className:l,...r}=e;return(0,a.jsx)(p.hJ,{className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",l),...r,ref:t})});b.displayName=p.hJ.displayName;let N=(0,h.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),j=r.forwardRef((e,t)=>{let{side:l="right",className:r,children:s,...o}=e;return(0,a.jsxs)(v,{children:[(0,a.jsx)(b,{}),(0,a.jsxs)(p.UC,{ref:t,className:(0,n.cn)(N({side:l}),r),...o,children:[s,(0,a.jsxs)(p.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,a.jsx)(f.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});j.displayName=p.UC.displayName;let w=e=>{let{className:t,...l}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...l})};w.displayName="SheetHeader";let y=e=>{let{className:t,...l}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...l})};y.displayName="SheetFooter";let L=r.forwardRef((e,t)=>{let{className:l,...r}=e;return(0,a.jsx)(p.hE,{ref:t,className:(0,n.cn)("text-lg font-semibold text-foreground",l),...r})});L.displayName=p.hE.displayName;let S=r.forwardRef((e,t)=>{let{className:l,...r}=e;return(0,a.jsx)(p.VY,{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",l),...r})});S.displayName=p.VY.displayName;var P=l(285),I=l(7655);let M=r.forwardRef((e,t)=>{let{className:l,children:r,...s}=e;return(0,a.jsxs)(I.bL,{ref:t,className:(0,n.cn)("relative overflow-hidden",l),...s,children:[(0,a.jsx)(I.LM,{className:"h-full w-full rounded-[inherit]",children:r}),(0,a.jsx)(X,{}),(0,a.jsx)(I.OK,{})]})});M.displayName=I.bL.displayName;let X=r.forwardRef((e,t)=>{let{className:l,orientation:r="vertical",...s}=e;return(0,a.jsx)(I.VM,{ref:t,orientation:r,className:(0,n.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",l),...s,children:(0,a.jsx)(I.lr,{className:"relative flex-1 rounded-full bg-border"})})});X.displayName=I.VM.displayName;var k=l(9670),G=l(1203),C=l(7648),U=l(462);let A=e=>{let{isOpen:t,hero:l,onBadgeLevelChange:o,onClose:d}=e,[n,c]=(0,r.useState)(null),[m,x]=(0,r.useState)(null),[p,h]=(0,r.useState)(0);if((0,r.useEffect)(()=>{if(l){if(l.level>=500)c("Max level reached!");else if(l.challenges.find(e=>e.xpPerLevel===k.V0)){let e=Math.max(0,(0,k.$H)(501)-l.totalXp);if(e>0&&k.V0>0){let t=20*(e/k.V0);if(t<1&&t>0)c("~1 min");else{let e=Math.round(t);if(0===e)c(t>0?"~1 min":null);else{let t=Math.floor(e/1440),l=e%1440,a=Math.floor(l/60),r=l%60,s=[];t>0&&s.push("".concat(t,"d")),a>0&&s.push("".concat(a,"h")),r>0&&s.push("".concat(r,"m")),c(s.length>0?s.join(" "):e>0?"~1 min":null)}}}else c(null)}else c("No time-based badge found to estimate.");if(l.personalGoalLevel>0){let e=(0,k.$H)(l.personalGoalLevel);if(h(e),l.totalXp<e){let t=e-l.totalXp;k.Yq>0?x(Math.ceil(t/k.Yq)):x(null)}else x(0)}else x(null),h(0)}else c(null),x(null),h(0)},[l]),!l)return null;let f="Level ".concat(l.level," Hero"),v=l.personalGoalLevel>0&&p>0?Math.min(100,l.totalXp/p*100):0===l.personalGoalLevel?0:100*(l.totalXp>0);return(0,a.jsx)(g,{open:t,onOpenChange:e=>!e&&d(),children:(0,a.jsxs)(j,{className:"sm:max-w-2xl w-full flex flex-col",side:"right",children:[(0,a.jsx)(w,{className:"px-6 pt-6 pb-4 border-b border-border",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[l.portraitUrl&&(0,a.jsx)(s.default,{src:l.portraitUrl.trimStart(),alt:"".concat(l.name," Portrait"),width:64,height:64,className:"rounded-md border-2 border-primary","data-ai-hint":"hero portrait"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(L,{className:"text-2xl text-primary",children:l.name}),(0,a.jsx)("p",{className:"text-sm text-accent font-semibold uppercase tracking-wider -mt-1",children:f}),(0,a.jsxs)(S,{children:["Level: ",l.level," (",l.xpTowardsNextLevel.toLocaleString()," / ",l.xpNeededForNextLevel.toLocaleString()," XP to next)"]})]})]})}),(0,a.jsxs)("div",{className:"px-6 py-4",children:[(0,a.jsxs)("h3",{className:"text-md font-semibold text-foreground/90 mb-1 flex items-center",children:[(0,a.jsx)(G.A,{className:"h-4 w-4 mr-2 text-muted-foreground"}),"Personal Goal Progress (Level ",l.personalGoalLevel>0?l.personalGoalLevel:"N/A",")"]}),(0,a.jsx)(i,{value:v,className:"h-3 bg-accent/20 [&>div]:bg-accent"}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[0===l.personalGoalLevel&&(0,a.jsx)(a.Fragment,{children:"No personal goal level set."}),l.personalGoalLevel>0&&null!==m&&m>0&&(0,a.jsxs)(a.Fragment,{children:[m.toLocaleString()," more badge level-ups (avg. ",k.Yq," XP) to reach Level ",l.personalGoalLevel]}),l.personalGoalLevel>0&&0===m&&(0,a.jsxs)(a.Fragment,{children:["Goal level ",l.personalGoalLevel," reached!"]})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1 text-right",children:l.personalGoalLevel>0?"".concat(l.totalXp.toLocaleString()," / ").concat(p.toLocaleString()," XP (").concat(v.toFixed(1),"%)"):"".concat(l.totalXp.toLocaleString()," XP")})]})]}),n&&(0,a.jsxs)("div",{className:"px-6 py-3 border-t border-border",children:[(0,a.jsxs)("h3",{className:"text-md font-semibold text-foreground/90 mb-1 flex items-center",children:[(0,a.jsx)(C.A,{className:"h-4 w-4 mr-2 text-muted-foreground"}),"Est. Time to Max Level (",500,")"]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground ml-6",children:n}),l.level<500&&l.challenges.some(e=>e.xpPerLevel===k.V0)&&!(null==n?void 0:n.includes("No time-based badge"))&&!(null==n?void 0:n.includes("Max level reached!"))&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground/70 ml-6 mt-0.5",children:"(Assuming a time badge level is earned every 20 mins of play)"})]}),(0,a.jsxs)("h3",{className:"text-xl font-semibold mb-3 text-foreground/90 px-6 border-t border-border pt-4 flex items-center",children:[(0,a.jsx)(U.A,{className:"h-5 w-5 mr-2 text-muted-foreground"}),"Hero Badges"]}),(0,a.jsx)(M,{className:"flex-grow px-6 pb-2",children:l.challenges&&l.challenges.length>0?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:l.challenges.map(e=>(0,a.jsx)(u,{challenge:e,heroId:l.id,onLevelChange:o},e.id))}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-32 bg-card/50 rounded-md p-4 text-center",children:[(0,a.jsxs)("p",{className:"text-muted-foreground",children:["No badges tracked for ",l.name,"."]}),(0,a.jsx)("p",{className:"text-xs mt-1 text-muted-foreground",children:"You can add badges in the Manage Heroes & Badges page."})]})}),(0,a.jsx)(y,{className:"px-6 py-4 border-t border-border",children:(0,a.jsx)(P.$,{onClick:d,variant:"outline",children:"Close"})})]})})};var E=l(6076),H=l(2558),J=l(7481),R=l(8271),V=l(594),F=l(6874),B=l.n(F),O=l(9613);let z=O.Kq,T=O.bL,_=O.l9,Y=r.forwardRef((e,t)=>{let{className:l,sideOffset:r=4,...s}=e;return(0,a.jsx)(O.UC,{ref:t,sideOffset:r,className:(0,n.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",l),...s})});Y.displayName=O.UC.displayName;let q="overwatchProgressionData_v3";function $(){let[e,t]=(0,r.useState)([]),[l,s]=(0,r.useState)(null),[d,n]=(0,r.useState)(!1),{toast:m}=(0,J.dj)(),x=(0,r.useCallback)(e=>{t((0,k.W_)(e).map(e=>{let t=e.challenges.map(e=>{let t=(0,E.J)(e.badgeId);return{id:e.id,badgeId:e.badgeId,level:e.level,xpPerLevel:t?t.xpPerLevel:0}}),l=(0,k.lx)(t),a=(0,k.fi)(l);return{...e,totalXp:l,...a}}).sort((e,t)=>t.totalXp-e.totalXp))},[]);(0,r.useEffect)(()=>{try{let e=localStorage.getItem(q),t=k.tN;if(e)try{let l,a;try{l=JSON.parse(e)}catch(e){console.error("Failed to parse localStorage data, resetting to default:",e),l={version:"0.0.0",heroes:t}}"object"==typeof l&&null!==l&&"version"in l&&"heroes"in l&&Array.isArray(l.heroes)?a=l.heroes:Array.isArray(l)?a=l:(console.warn("Invalid data format in localStorage, resetting to default."),a=t);let r=a.map(e=>{var t,l;return{...e,portraitUrl:(null===(t=e.portraitUrl)||void 0===t?void 0:t.trimStart())||"",personalGoalLevel:null!==(l=e.personalGoalLevel)&&void 0!==l?l:0,challenges:e.challenges.map(e=>({id:e.id,badgeId:e.badgeId,level:e.level}))}}),s=t.map(e=>{let t=r.find(t=>t.id===e.id);if(!t)return{...e,portraitUrl:e.portraitUrl.trimStart(),challenges:e.challenges.map(e=>({id:e.id,badgeId:e.badgeId,level:Math.max(1,e.level||1)}))};{var l,a,s;let r=[],o=new Set;for(let l of e.challenges){let e=t.challenges.find(e=>e.id===l.id||e.badgeId===l.badgeId);e?(r.push({id:e.id,badgeId:e.badgeId,level:Math.max(1,e.level||1)}),o.add(e.id)):r.push({id:l.id,badgeId:l.badgeId,level:1})}for(let e of t.challenges)!o.has(e.id)&&(0,E.J)(e.badgeId)&&r.push({id:e.id,badgeId:e.badgeId,level:Math.max(1,e.level||1)});return{id:e.id,name:t.name||e.name,portraitUrl:(null===(l=t.portraitUrl)||void 0===l?void 0:l.trimStart())||e.portraitUrl.trimStart(),personalGoalLevel:null!==(s=null!==(a=t.personalGoalLevel)&&void 0!==a?a:e.personalGoalLevel)&&void 0!==s?s:0,challenges:r}}}),o=r.filter(e=>!t.some(t=>t.id===e.id)).map(e=>{var t;return{...e,portraitUrl:e.portraitUrl.trimStart(),personalGoalLevel:null!==(t=e.personalGoalLevel)&&void 0!==t?t:0,challenges:e.challenges.map(e=>(0,E.J)(e.badgeId)?{id:e.id,badgeId:e.badgeId,level:Math.max(1,e.level||1)}:null).filter(Boolean)}}),d=[...s,...o];x(d),localStorage.setItem(q,JSON.stringify({version:"1.0.0",heroes:d}))}catch(l){console.error("Failed to parse/synchronize hero data from localStorage, resetting to default:",l);let e=t.map(e=>({...e,portraitUrl:e.portraitUrl.trimStart(),personalGoalLevel:e.personalGoalLevel||0,challenges:e.challenges.map(e=>{var t;return{id:e.id,badgeId:e.badgeId,level:Math.max(1,null!==(t=e.level)&&void 0!==t?t:1)}})}));x(e),localStorage.setItem(q,JSON.stringify({version:"1.0.0",heroes:e}))}else{let e=t.map(e=>({...e,portraitUrl:e.portraitUrl.trimStart(),personalGoalLevel:e.personalGoalLevel||0,challenges:e.challenges.map(e=>{var t;return{id:e.id,badgeId:e.badgeId,level:Math.max(1,null!==(t=e.level)&&void 0!==t?t:1)}})}));x(e),localStorage.setItem(q,JSON.stringify({version:"1.0.0",heroes:e}))}}catch(t){console.error("Error during initial data load, resetting to default:",t);let e=k.tN.map(e=>({...e,portraitUrl:e.portraitUrl.trimStart(),personalGoalLevel:e.personalGoalLevel||0,challenges:e.challenges.map(e=>{var t;return{id:e.id,badgeId:e.badgeId,level:Math.max(1,null!==(t=e.level)&&void 0!==t?t:1)}})}));x(e),localStorage.setItem(q,JSON.stringify({version:"1.0.0",heroes:e}))}},[x]);let u=t=>{s(e.find(e=>e.id===t.id)||t),n(!0)},p=(0,r.useMemo)(()=>e.reduce((e,t)=>e+t.totalXp,0),[e]),h=(0,r.useMemo)(()=>0===e.length?0:(0,k.$H)(501)*e.length,[e.length]),f=(0,r.useMemo)(()=>(0,k.fi)(p),[p]),g=(0,r.useMemo)(()=>0===h?0:Math.min(p/h*100,100),[p,h]),v=(0,r.useMemo)(()=>{let t=0;return e.forEach(e=>{if(e.level>=500)return;let l=e.challenges.find(e=>{let t=(0,E.J)(e.badgeId);return(null==t?void 0:t.xpPerLevel)===k.V0});if(!l)return;let a=(0,E.J)(l.badgeId);if(!a)return;let r=Math.max(0,(0,k.$H)(501)-e.totalXp);if(r>0&&a.xpPerLevel>0){let e=r/a.xpPerLevel;t+=20*e}}),t},[e]),b=(0,r.useCallback)(e=>{if(e<0&&(e=0),e<1&&e>0)return"~1 min";if(0===Math.round(e))return"0m";let t=Math.round(e),l=Math.floor(t/525600),a=t%525600,r=Math.floor(a/1440),s=Math.floor((a%=1440)/60),o=a%=60,d=[];return l>0&&d.push("".concat(l,"y")),r>0&&d.push("".concat(r,"d")),s>0&&d.push("".concat(s,"h")),(o>0||0===d.length)&&d.push("".concat(o,"m")),d.join(" ")},[]),N=(0,r.useMemo)(()=>{if(0===e.length)return"Loading...";if(e.every(e=>e.level>=500))return"All heroes maxed!";if(0===v){let t=!1;for(let l of e)if(l.level<500){let e=l.challenges.find(e=>{let t=(0,E.J)(e.badgeId);return(null==t?void 0:t.xpPerLevel)===k.V0});if(e){let a=(0,E.J)(e.badgeId);if(!a)continue;if(Math.max(0,(0,k.$H)(501)-l.totalXp)>0&&a.xpPerLevel>0){t=!0;break}}}if(!t)return"N/A (No time tracking for unmaxed heroes)"}return b(v)},[v,e,b]);return(0,a.jsxs)("div",{className:"min-h-screen bg-background text-foreground p-4 sm:p-6 lg:p-8",children:[(0,a.jsxs)("header",{className:"mb-6 text-center relative",children:[(0,a.jsx)("h1",{className:"text-4xl sm:text-5xl font-bold text-primary tracking-tight",children:"Overwatch Progression Tracker"}),(0,a.jsx)("p",{className:"text-lg text-muted-foreground mt-2",children:"Track your hero badges, levels, and personal goals."}),(0,a.jsxs)("div",{className:"absolute top-0 right-0 flex space-x-2",children:[(0,a.jsx)(z,{children:(0,a.jsxs)(T,{children:[(0,a.jsx)(_,{asChild:!0,children:(0,a.jsx)(P.$,{variant:"ghost",size:"icon",asChild:!0,className:"text-muted-foreground hover:text-foreground",children:(0,a.jsx)(B(),{href:"/admin/manage-badges",children:(0,a.jsx)(R.A,{className:"h-6 w-6"})})})}),(0,a.jsx)(Y,{className:"max-w-xs bg-popover text-popover-foreground p-3 rounded-md shadow-lg text-sm",side:"bottom",align:"end",children:(0,a.jsx)("p",{children:"Manage Heroes & Badges"})})]})}),(0,a.jsx)(z,{children:(0,a.jsxs)(T,{children:[(0,a.jsx)(_,{asChild:!0,children:(0,a.jsx)(P.$,{variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-foreground",children:(0,a.jsx)(V.A,{className:"h-6 w-6"})})}),(0,a.jsxs)(Y,{className:"max-w-xs bg-popover text-popover-foreground p-3 rounded-md shadow-lg text-sm",side:"bottom",align:"end",children:[(0,a.jsx)("p",{className:"font-semibold mb-1",children:"How XP is Calculated:"}),(0,a.jsx)("p",{className:"text-xs mb-2",children:"XP is earned by leveling up individual hero badges. Badge level 1 is the base and grants no XP. XP is awarded for levels 2 and above (i.e., level N grants (N-1) * XP_PER_LEVEL)."}),(0,a.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[(0,a.jsxs)("li",{children:["Hero-specific Badges: ",k.Yq," XP per level above 1"]}),(0,a.jsxs)("li",{children:["Win Badges: ",k.YZ," XP per level above 1"]}),(0,a.jsxs)("li",{children:["Time Played Badges: ",k.V0," XP per level above 1"]})]}),(0,a.jsx)("p",{className:"mt-2 font-semibold mb-1",children:"Hero Level Progression:"}),(0,a.jsx)("p",{className:"text-xs mb-2",children:"Hero levels are based on total XP earned, following the Overwatch 2 progression system. XP requirements per level vary."}),(0,a.jsx)("p",{className:"mt-3 text-xs",children:"Click on a hero to edit their badges and see progress. Badges must be level 2 or higher to contribute XP."})]})]})})]})]}),(0,a.jsxs)(o.Zp,{className:"mb-6 shadow-lg",children:[(0,a.jsx)(o.aR,{className:"pb-2 pt-4 px-4",children:(0,a.jsxs)(o.ZB,{className:"text-xl flex items-center gap-2 text-primary",children:[(0,a.jsx)(U.A,{className:"h-5 w-5"}),"Overall Progression (All Heroes Max Level ",500,")"]})}),(0,a.jsxs)(o.Wu,{className:"px-4 pb-4",children:[(0,a.jsxs)("div",{className:"mb-1 flex justify-between items-baseline",children:[(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Global Level: ",(0,a.jsx)("strong",{className:"text-foreground",children:f.level})]}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:[p.toLocaleString()," / ",h.toLocaleString()," XP"]})]}),(0,a.jsx)(i,{value:g,className:"h-3 w-full bg-accent/20 [&>div]:bg-accent"}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-1 text-right",children:[g.toFixed(4),"% towards all heroes maxed"]}),(0,a.jsxs)("div",{className:"mt-3 border-t border-border pt-3",children:[(0,a.jsxs)("h4",{className:"text-sm font-semibold text-foreground/90 mb-1 flex items-center",children:[(0,a.jsx)(C.A,{className:"h-4 w-4 mr-2 text-muted-foreground"}),"Est. Total Time to Max All Heroes"]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground ml-6",children:N}),!N.includes("All heroes maxed!")&&!N.includes("Loading...")&&!N.includes("N/A")&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground/70 ml-6 mt-0.5",children:"(Assuming a time badge level is earned every 20 mins of play per hero)"})]})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 2xl:grid-cols-8 3xl:grid-cols-10 gap-4",children:0===e.length?(0,a.jsx)("div",{className:"text-center py-10 col-span-full",children:(0,a.jsx)("p",{className:"text-xl text-muted-foreground",children:"Loading hero data..."})}):e.map(e=>(0,a.jsx)(c,{hero:e,onEditHeroBadges:u},e.id))}),l&&(0,a.jsx)(A,{isOpen:d,hero:l,onBadgeLevelChange:(a,r,o)=>{let d=Math.max(1,o),n=e.map(e=>{if(e.id===a){let t=e.challenges.map(e=>e.id===r?{...e,level:d}:e),l=t.map(e=>{let t=(0,E.J)(e.badgeId);return{id:e.id,badgeId:e.badgeId,level:e.level,xpPerLevel:t?t.xpPerLevel:0}}),a=(0,k.lx)(l),s=(0,k.fi)(a);return{...e,challenges:t,totalXp:a,...s}}return e}),i=(0,k.V_)(n),c=n.sort((e,t)=>t.totalXp-e.totalXp);t(c),localStorage.setItem(q,JSON.stringify({version:"1.0.0",heroes:i}));let x=c.find(e=>e.id===a);x&&l&&l.id===a&&s(x);let u=n.find(e=>e.id===a),p=null==u?void 0:u.challenges.find(e=>e.id===r);m({title:"Badge Updated",description:"".concat(null==u?void 0:u.name,"'s \"").concat(null==p?void 0:p.title,'" badge level set to ').concat(d,"."),variant:"default"})},onClose:()=>{n(!1)}}),(0,a.jsx)(H.Toaster,{})]})}},8139:(e,t,l)=>{Promise.resolve().then(l.bind(l,4443))}},e=>{var t=t=>e(e.s=t);e.O(0,[774,378,621,836,122,441,684,358],()=>t(8139)),_N_E=e.O()}]);